# 知识图谱

### 1、什么是知识图谱？

知识图谱本质上是一个**语义网络**，它用图的形式来描述现实世界中的概念、实体及其相互关系。它由以下核心元素构成：
*   **节点**：代表现实世界中的“实体”（如：人物、公司、产品）或“概念”（如：国家、行业）。
*   **边**：代表节点之间的“关系”（如：[张三] -`就职于`-> [阿里巴巴]）。
*   **属性**：描述节点或边的特征信息（如：[张三] 节点有属性 `年龄: 30`，`职位: 算法工程师`）。
与传统的关系型数据库（表格）不同，知识图谱的结构更灵活，更擅长处理复杂、多跳的关联查询和推理。
### 2、为什么智能体需要知识图谱？
智能体（如聊天机器人、智能助手）仅依赖大语言模型时，可能会遇到以下问题：
*   **事实幻觉**：生成看似合理但与事实不符的信息。
*   **知识滞后**：无法获取训练数据截止日期之后的新知识。
*   **缺乏深度推理**：难以回答需要跨多个实体进行复杂关联分析的问题。

知识图谱可以为智能体提供：

*   **事实依据**：作为结构化的“事实数据库”，为智能体提供准确、可验证的信息。
*   **增强推理**：支持多跳查询，回答“XX公司的CEO的母校是哪里？”这类复杂问题。
*   **可解释性**：答案可以追溯到知识图谱中的具体路径，增强了回答的可信度。

---
### 3、核心概念解析
| 概念       | 解释                                                         | 示例                                                  |
| ---------- | ------------------------------------------------------------ | ----------------------------------------------------- |
| **实体**   | 现实世界中可区分的独立事物。                                 | `苹果公司`、`iPhone 15`、`蒂姆·库克`                  |
| **关系**   | 连接两个实体，描述它们之间的某种联系。                       | `生产`、`是...的CEO`、`发布于`                        |
| **属性**   | 实体或关系的特征或描述。                                     | `iPhone 15` 的属性：`颜色: 深空黑`、`存储容量: 256GB` |
| **三元组** | 知识图谱的基本组成单元，形式为 `(主语, 谓语, 宾语)` 或 `(实体, 关系, 实体/值)`。 | `(蒂姆·库克, 是...的CEO, 苹果公司)`                   |
### 4、知识图谱使用流程

#### 1）创建知识图谱

在知识库创建阶段，可开启知识图谱功能，按照模板上传对应的图谱Schema：

**功能说明:**开启此功能后会调用大模型对切片内容提及的三元组并在知识库层面构建知识图谱。检索时会引入图谱增强chunk间关系检索，提升相关性召回效果。

**适用场景:**用于回答问题的chunk切片跨多个文件或同文件的不同章节，依赖chunk之间通过实体关系实现多跳、关系类检索才能实现更全面的上下文召回。

**注意事项:**开启后将对非表格类文档在导入解析环节调用大语言模型抽取三元组、构建知识图谱，会增加文档解析处理时长并增加大模型tokens资源开销。检索召回时会增加图谱检索召回会增加检索耗时。

![image-20251113175820513](assets/image-20251113175820513.png)

#### 2）查看知识图谱

点击【知识图谱】，可查看知识图谱详情，以及知识图谱生成进度。

![image-20251113182555653](assets/image-20251113182555653.png)

![image-20251114122615815](assets/image-20251114122615815.png)

#### 3）生成社区报告

**社区报告：**基于知识图谱，通过社区检测算法，将图谱按主题划分为多个社区，并为每个社区生成的主题报告（用于描述该社区内的所有实体级关系）。社区报告在查询时作为一类综合性知识参与检索召回。适合应用于综合性全局问答类场景使用。

点击【社区报告】-【生成/重新生成】，用户可查看社区报告详情，并新增、编辑社区报告。

**提示：**社区报告需要在知识图片解析完成之后，才能生成。需要用户手动点击生成。社区报告在上传文件或删除文件时不会自动触发构建,如需更新报告需要点击生成/重新生成构建。重新生成社区报告，会默认删除已生成的社区报告。

![image-20251113180152298](assets/image-20251113180152298.png)

![image-20251113182044083](assets/image-20251113182044083.png)

![image-20251113182148087](assets/image-20251113182148087.png)

![image-20251113182222307](assets/image-20251113182222307.png)