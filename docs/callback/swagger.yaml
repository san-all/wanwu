basePath: /callback/v1
definitions:
  mp.ProviderModelByHuoshan:
    properties:
      embedding:
        $ref: '#/definitions/mp_huoshan.Embedding'
      llm:
        $ref: '#/definitions/mp_huoshan.LLM'
    type: object
  mp.ProviderModelByInfini:
    properties:
      embedding:
        $ref: '#/definitions/mp_infini.Embedding'
      llm:
        $ref: '#/definitions/mp_infini.LLM'
      rerank:
        $ref: '#/definitions/mp_infini.Rerank'
    type: object
  mp.ProviderModelByOllama:
    properties:
      embedding:
        $ref: '#/definitions/mp_ollama.Embedding'
      llm:
        $ref: '#/definitions/mp_ollama.LLM'
    type: object
  mp.ProviderModelByOpenAICompatible:
    properties:
      embedding:
        $ref: '#/definitions/mp_openai_compatible.Embedding'
      llm:
        $ref: '#/definitions/mp_openai_compatible.LLM'
      rerank:
        $ref: '#/definitions/mp_openai_compatible.Rerank'
    type: object
  mp.ProviderModelByQwen:
    properties:
      embedding:
        $ref: '#/definitions/mp_qwen.Embedding'
      llm:
        $ref: '#/definitions/mp_qwen.LLM'
      rerank:
        $ref: '#/definitions/mp_qwen.Rerank'
    type: object
  mp.ProviderModelByYuanjing:
    properties:
      embedding:
        $ref: '#/definitions/mp_yuanjing.Embedding'
      gui:
        $ref: '#/definitions/mp_yuanjing.Gui'
      llm:
        $ref: '#/definitions/mp_yuanjing.LLM'
      ocr:
        $ref: '#/definitions/mp_yuanjing.Ocr'
      pdf-parser:
        $ref: '#/definitions/mp_yuanjing.PdfParser'
      rerank:
        $ref: '#/definitions/mp_yuanjing.Rerank'
    type: object
  mp.ProviderModelConfig:
    properties:
      providerHuoshan:
        $ref: '#/definitions/mp.ProviderModelByHuoshan'
      providerModelByInfini:
        $ref: '#/definitions/mp.ProviderModelByInfini'
      providerOllama:
        $ref: '#/definitions/mp.ProviderModelByOllama'
      providerOpenAICompatible:
        $ref: '#/definitions/mp.ProviderModelByOpenAICompatible'
      providerQwen:
        $ref: '#/definitions/mp.ProviderModelByQwen'
      providerYuanJing:
        $ref: '#/definitions/mp.ProviderModelByYuanjing'
    type: object
  mp_common.AsrResp:
    properties:
      code:
        type: integer
      msg:
        type: string
      result:
        $ref: '#/definitions/mp_common.AsrResult'
      status:
        type: string
      uuid:
        type: string
    type: object
  mp_common.AsrResult:
    properties:
      diarization:
        items:
          $ref: '#/definitions/mp_common.DiarizationObj'
        type: array
    type: object
  mp_common.DiarizationObj:
    properties:
      end:
        type: number
      speaker:
        type: integer
      start:
        type: number
      text:
        type: string
      trans:
        type: string
    type: object
  mp_common.EmbeddingData:
    properties:
      embedding:
        items:
          type: number
        minItems: 1
        type: array
      index:
        type: integer
      object:
        type: string
    required:
    - embedding
    type: object
  mp_common.EmbeddingReq:
    properties:
      encoding_format:
        type: string
      input:
        items:
          type: string
        type: array
      model:
        type: string
    required:
    - input
    - model
    type: object
  mp_common.EmbeddingResp:
    properties:
      created:
        type: integer
      data:
        items:
          $ref: '#/definitions/mp_common.EmbeddingData'
        type: array
      id:
        type: string
      model:
        type: string
      object:
        type: string
      usage:
        $ref: '#/definitions/mp_common.Usage'
    required:
    - data
    - model
    type: object
  mp_common.ExtraBody:
    properties:
      api_option:
        description: 选择指定功能。 1）math：拍照答题；2）ocr：多模态OCR；3）general：通用场景。   默认会根据prompt进行意图判断
        type: string
    type: object
  mp_common.FunctionCall:
    properties:
      arguments:
        type: string
      name:
        type: string
    type: object
  mp_common.GuiContent:
    properties:
      action:
        type: string
      box:
        items:
          type: integer
        type: array
      description:
        type: string
      operation:
        type: string
      sensitivity:
        type: string
      value:
        type: string
    required:
    - action
    - description
    - operation
    type: object
  mp_common.GuiReq:
    properties:
      algo:
        description: 算法名称，默认gui_agent_v1
        type: string
      current_screenshot:
        description: 当前屏幕截图，Base64编码的图像字符串
        type: string
      current_screenshot_height:
        description: 当前屏幕截图的高度
        type: integer
      current_screenshot_width:
        description: 当前屏幕截图的宽度
        type: integer
      current_screenshot_xml:
        description: 屏幕布局导出的xml文件
        type: string
      history:
        description: 当前任务的历史返回结果，历次返回结果中的content字段
        items:
          type: string
        type: array
      platform:
        description: 平台信息，移动端填写Mobile, Windows端填写WIN，Mac端填写MAC
        type: string
      task:
        description: 当前用户任务
        type: string
    required:
    - current_screenshot
    - current_screenshot_height
    - current_screenshot_width
    - platform
    - task
    type: object
  mp_common.GuiResp:
    properties:
      code:
        type: integer
      content:
        $ref: '#/definitions/mp_common.GuiContent'
      message:
        type: string
      usage:
        $ref: '#/definitions/mp_common.Usage'
    required:
    - content
    - message
    - usage
    type: object
  mp_common.LLMReq:
    properties:
      do_sample:
        description: Yuanjing
        type: boolean
      enable_thinking:
        type: boolean
      extra_body:
        allOf:
        - $ref: '#/definitions/mp_common.ExtraBody'
        description: 扩展参数
      frequency_penalty:
        description: 频率惩罚系数
        type: number
      logit_bias:
        additionalProperties:
          type: integer
        description: 调整指定 token 在模型输出内容中出现的概率
        type: object
      logprobs:
        description: 是否返回输出 Token 的对数概率
        type: boolean
      max_completion_tokens:
        description: 控制模型输出的最大长度[0,64k]
        type: integer
      max_tokens:
        type: integer
      messages:
        items:
          $ref: '#/definitions/mp_common.OpenAIReqMsg'
        type: array
      min_p:
        type: number
      model:
        description: general
        type: string
      "n":
        type: integer
      parallel_tool_calls:
        description: 是否开启并行工具调用
        type: boolean
      presence_penalty:
        description: 控制模型生成文本时的内容重复度
        type: number
      repetition_penalty:
        description: 模型生成时连续序列中的重复度
        type: number
      response_format:
        $ref: '#/definitions/mp_common.OpenAIResponseFormat'
      seed:
        description: 种子
        type: integer
      stop:
        type: string
      stream:
        type: boolean
      stream_options:
        allOf:
        - $ref: '#/definitions/mp_common.StreamOptions'
        description: '当启用流式输出时，可通过将本参数设置为{"include_usage": true}，在输出的最后一行显示所使用的Token数。'
      temperature:
        type: number
      thinking:
        allOf:
        - $ref: '#/definitions/mp_common.Thinking'
        description: custom
      thinking_budget:
        description: 思考过程的最大长度，只在enable_thinking为true时生效
        type: integer
      tool_choice:
        description: 强制指定工具调用的策略
      tools:
        items:
          $ref: '#/definitions/mp_common.OpenAITool'
        type: array
      top_k:
        type: integer
      top_logprobs:
        description: 指定在每一步生成时，返回模型最大概率的候选 Token 个数
        type: integer
      top_p:
        type: number
      user:
        type: string
      web_search:
        allOf:
        - $ref: '#/definitions/mp_common.WebSearch'
        description: 搜索增强
    required:
    - messages
    - model
    type: object
  mp_common.LLMResp:
    properties:
      choices:
        description: 生成结果列表
        items:
          $ref: '#/definitions/mp_common.OpenAIRespChoice'
        type: array
      code:
        type: integer
      created:
        description: 时间戳（秒）
        type: integer
      id:
        description: 唯一标识
        type: string
      img_id:
        description: 视觉模型返回图片id
        type: string
      model:
        description: 使用的模型
        type: string
      object:
        description: 固定为 "chat.completion"
        type: string
      service_tier:
        description: （火山）指定是否使用TPM保障包。生效对象为购买了保障包推理接入点
        type: string
      system_fingerprint:
        type: string
      usage:
        allOf:
        - $ref: '#/definitions/mp_common.OpenAIRespUsage'
        description: token 使用统计
    required:
    - choices
    - model
    type: object
  mp_common.MsgRole:
    enum:
    - system
    - user
    - assistant
    - tool
    type: string
    x-enum-varnames:
    - MsgRoleSystem
    - MsgRoleUser
    - MsgRoleAssistant
    - MsgRoleFunction
  mp_common.OcrData:
    properties:
      length:
        type: integer
      page_num:
        items:
          type: integer
        minItems: 1
        type: array
      text:
        type: string
      type:
        type: string
    required:
    - page_num
    - type
    type: object
  mp_common.OcrResp:
    properties:
      code:
        type: integer
      data:
        items:
          $ref: '#/definitions/mp_common.OcrData'
        type: array
      id:
        type: string
      message:
        type: string
      time_cost:
        type: number
      timestamp:
        type: string
      version:
        type: string
    required:
    - data
    - message
    type: object
  mp_common.OpenAIFunction:
    properties:
      description:
        type: string
      name:
        type: string
      parameters:
        $ref: '#/definitions/mp_common.OpenAIFunctionParameters'
    required:
    - name
    type: object
  mp_common.OpenAIFunctionParameters:
    properties:
      properties:
        additionalProperties:
          $ref: '#/definitions/mp_common.OpenAIFunctionParametersProperty'
        type: object
      required:
        items:
          type: string
        type: array
      type:
        type: string
    type: object
  mp_common.OpenAIFunctionParametersProperty:
    properties:
      description:
        type: string
      type:
        type: string
    type: object
  mp_common.OpenAIMsg:
    properties:
      content:
        type: string
      function_call:
        $ref: '#/definitions/mp_common.FunctionCall'
      name:
        type: string
      reasoning_content:
        type: string
      role:
        allOf:
        - $ref: '#/definitions/mp_common.MsgRole'
        description: '"system" | "user" | "assistant" | "function(已弃用)"'
      tool_call_id:
        type: string
      tool_calls:
        items:
          $ref: '#/definitions/mp_common.ToolCall'
        type: array
    type: object
  mp_common.OpenAIReqMsg:
    properties:
      content: {}
      function_call:
        $ref: '#/definitions/mp_common.FunctionCall'
      name:
        type: string
      reasoning_content:
        type: string
      role:
        allOf:
        - $ref: '#/definitions/mp_common.MsgRole'
        description: '"system" | "user" | "assistant" | "function(已弃用)"'
      tool_call_id:
        type: string
      tool_calls:
        items:
          $ref: '#/definitions/mp_common.ToolCall'
        type: array
    type: object
  mp_common.OpenAIRespChoice:
    properties:
      delta:
        allOf:
        - $ref: '#/definitions/mp_common.OpenAIMsg'
        description: 流式生成的消息
      finish_reason:
        description: 停止原因
        type: string
      index:
        description: 选项索引
        type: integer
      logprobs: {}
      message:
        allOf:
        - $ref: '#/definitions/mp_common.OpenAIMsg'
        description: 非流式生成的消息
    type: object
  mp_common.OpenAIRespUsage:
    properties:
      completion_tokens:
        description: 输出 token 数
        type: integer
      prompt_tokens:
        description: 输入 token 数
        type: integer
      total_tokens:
        description: 总 token 数
        type: integer
    type: object
  mp_common.OpenAIResponseFormat:
    properties:
      type:
        description: '"text" | "json"'
        type: string
    type: object
  mp_common.OpenAITool:
    properties:
      function:
        $ref: '#/definitions/mp_common.OpenAIFunction'
      type:
        $ref: '#/definitions/mp_common.ToolType'
    required:
    - function
    - type
    type: object
  mp_common.PdfParserResp:
    properties:
      code:
        type: string
      content:
        type: string
      message:
        type: string
      status:
        type: string
      trace_id:
        type: string
    required:
    - code
    - content
    - message
    type: object
  mp_common.RerankReq:
    properties:
      documents:
        items:
          type: string
        type: array
      model:
        type: string
      query:
        type: string
      return_documents:
        type: boolean
      top_n:
        type: integer
    required:
    - documents
    - model
    - query
    type: object
  mp_common.RerankResp:
    properties:
      model:
        type: string
      object:
        type: string
      request_id:
        type: string
      results:
        items:
          $ref: '#/definitions/mp_common.Result'
        type: array
      usage:
        $ref: '#/definitions/mp_common.Usage'
    required:
    - results
    type: object
  mp_common.Result:
    properties:
      document: {}
      index:
        type: integer
      relevance_score:
        type: number
    required:
    - relevance_score
    type: object
  mp_common.StreamOptions:
    properties:
      chunk_include_usage:
        type: boolean
      include_usage:
        type: boolean
    type: object
  mp_common.T2IUsage:
    properties:
      total_patches:
        type: integer
    type: object
  mp_common.Tag:
    properties:
      text:
        type: string
    type: object
  mp_common.Text2ImageReq:
    properties:
      advanced_opt:
        description: '高级选项参数 json, {"height": 512, "width": 512, "num_images_per_prompt":
          1, "style": "摄影"}'
        type: string
      prompt:
        description: 提示词
        type: string
      report_url:
        description: 参考
        type: string
      response_format:
        description: “url” or “b64_json”,默认b64_json
        type: string
    required:
    - prompt
    type: object
  mp_common.Text2ImageResp:
    properties:
      code:
        type: integer
      msg:
        type: string
      result:
        items:
          type: string
        type: array
      usage:
        $ref: '#/definitions/mp_common.T2IUsage'
    type: object
  mp_common.Thinking:
    properties:
      type:
        default: enabled
        type: string
    type: object
  mp_common.ToolCall:
    properties:
      function:
        $ref: '#/definitions/mp_common.FunctionCall'
      id:
        type: string
      index:
        type: integer
      type:
        $ref: '#/definitions/mp_common.ToolType'
    type: object
  mp_common.ToolType:
    enum:
    - function
    type: string
    x-enum-varnames:
    - ToolTypeFunction
  mp_common.Usage:
    properties:
      completion_tokens:
        type: integer
      prompt_tokens:
        type: integer
      total_tokens:
        type: integer
    type: object
  mp_common.WebSearch:
    properties:
      enable:
        type: boolean
      enable_citation:
        type: boolean
      enable_status:
        type: boolean
      enable_trace:
        type: boolean
    type: object
  mp_huoshan.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_huoshan.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_infini.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_infini.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_infini.Rerank:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_ollama.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_ollama.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_openai_compatible.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_openai_compatible.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_openai_compatible.Rerank:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_qwen.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_qwen.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_qwen.Rerank:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_yuanjing.Embedding:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_yuanjing.Gui:
    properties:
      apiKey:
        description: ApiKey
        type: string
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_yuanjing.LLM:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
      functionCalling:
        description: 函数调用是否支持
        enum:
        - noSupport
        - toolCall
        type: string
      maxTokens:
        description: 模型回答最大tokens
        type: integer
      visionSupport:
        description: 视觉支持
        enum:
        - noSupport
        - support
        type: string
    type: object
  mp_yuanjing.Ocr:
    properties:
      apiKey:
        description: ApiKey
        type: string
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_yuanjing.PdfParser:
    properties:
      apiKey:
        description: ApiKey
        type: string
      endpointUrl:
        description: 推理url
        type: string
    type: object
  mp_yuanjing.Rerank:
    properties:
      apiKey:
        description: ApiKey
        type: string
      contextSize:
        description: 上下文长度
        type: integer
      endpointUrl:
        description: 推理url
        type: string
    type: object
  protocol.DataType:
    enum:
    - object
    - number
    - integer
    - string
    - array
    - "null"
    - boolean
    type: string
    x-enum-varnames:
    - ObjectT
    - Number
    - Integer
    - String
    - Array
    - "Null"
    - Boolean
  protocol.InputSchema:
    properties:
      properties:
        additionalProperties:
          $ref: '#/definitions/protocol.Property'
        type: object
      required:
        items:
          type: string
        type: array
      type:
        $ref: '#/definitions/protocol.InputSchemaType'
    type: object
  protocol.InputSchemaType:
    enum:
    - object
    type: string
    x-enum-varnames:
    - Object
  protocol.OutputSchema:
    properties:
      properties:
        additionalProperties:
          $ref: '#/definitions/protocol.Property'
        type: object
      required:
        items:
          type: string
        type: array
      type:
        $ref: '#/definitions/protocol.InputSchemaType'
    type: object
  protocol.Property:
    properties:
      description:
        description: Description is the description of the schema.
        type: string
      enum:
        items:
          type: string
        type: array
      items:
        allOf:
        - $ref: '#/definitions/protocol.Property'
        description: Items specifies which data type an array contains, if the schema
          type is Array.
      properties:
        additionalProperties:
          $ref: '#/definitions/protocol.Property'
        description: Properties describes the properties of an object, if the schema
          type is Object.
        type: object
      required:
        items:
          type: string
        type: array
      type:
        $ref: '#/definitions/protocol.DataType'
    type: object
  protocol.Tool:
    properties:
      annotations:
        allOf:
        - $ref: '#/definitions/protocol.ToolAnnotations'
        description: Annotations provides additional hints about the tool's behavior
      description:
        description: Description is a human-readable description of the tool
        type: string
      inputSchema:
        allOf:
        - $ref: '#/definitions/protocol.InputSchema'
        description: InputSchema defines the expected parameters for the tool using
          JSON Schema
      name:
        description: Name is the unique identifier of the tool
        type: string
      outputSchema:
        allOf:
        - $ref: '#/definitions/protocol.OutputSchema'
        description: OutputSchema defines expected output structure for the tool using
          Optional JSON Schema
    type: object
  protocol.ToolAnnotations:
    properties:
      destructiveHint:
        description: |-
          DestructiveHint indicates the tool may perform destructive updates
          (only meaningful when ReadOnlyHint is false)
        type: boolean
      idempotentHint:
        description: |-
          IdempotentHint indicates calling the tool repeatedly with the same arguments
          has no additional effect (only meaningful when ReadOnlyHint is false)
        type: boolean
      openWorldHint:
        description: OpenWorldHint indicates the tool may interact with an "open world"
          of external entities
        type: boolean
      readOnlyHint:
        description: ReadOnlyHint indicates the tool does not modify its environment
        type: boolean
      title:
        description: Title is a human-readable title for the tool, useful for UI display
        type: string
    type: object
  request.Avatar:
    properties:
      key:
        description: 前端透传给后端用于保存avatar，例如：custom-upload/avatar/abc/def.png
        type: string
      path:
        description: 前端请求地址，例如：/v1/static/avatar/abc/def.png (请求非必填)
        type: string
    type: object
  request.CallbackMetaData:
    properties:
      key:
        type: string
      metaId:
        type: string
      value:
        type: string
    required:
    - metaId
    - value
    type: object
  request.CallbackUpdateDocStatusReq:
    properties:
      id:
        type: string
      metaDataList:
        items:
          $ref: '#/definitions/request.CallbackMetaData'
        type: array
      status:
        type: integer
    required:
    - id
    - status
    type: object
  request.CustomModelInfo:
    properties:
      llm_model_id:
        type: string
    type: object
  request.FileUrlConvertBase64Req:
    properties:
      fileUrl:
        description: 文件URL
        type: string
    required:
    - fileUrl
    type: object
  request.HistoryItem:
    properties:
      needHistory:
        type: boolean
      query:
        type: string
      response:
        type: string
    type: object
  request.MetaItem:
    properties:
      comparison_operator:
        description: 比较运算符
        type: string
      meta_name:
        description: 元数据名称
        type: string
      meta_type:
        description: 元数据类型
        type: string
      value:
        description: 用于过滤的条件值
    type: object
  request.MetadataFilterItem:
    properties:
      conditions:
        items:
          $ref: '#/definitions/request.MetaItem'
        type: array
      filtering_kb_name:
        type: string
      logical_operator:
        type: string
    type: object
  request.QAMetadataFilterItem:
    properties:
      conditions:
        items:
          $ref: '#/definitions/request.MetaItem'
        type: array
      filtering_qa_base_name:
        type: string
      logical_operator:
        type: string
    type: object
  request.RagKnowledgeChatReq:
    properties:
      auto_citation:
        description: 是否自动角标
        type: boolean
      chichat:
        description: 当知识库召回结果为空时是否使用默认话术（兜底），默认为true
        type: boolean
      custom_model_info:
        $ref: '#/definitions/request.CustomModelInfo'
      history:
        items:
          $ref: '#/definitions/request.HistoryItem'
        type: array
      knowledge_base_info:
        additionalProperties:
          items:
            $ref: '#/definitions/request.RagKnowledgeInfo'
          type: array
        type: object
      knowledgeIdList:
        description: 知识库id列表
        items:
          type: string
        type: array
      max_history:
        type: integer
      metadata_filtering:
        description: 元数据过滤开关
        type: boolean
      metadata_filtering_conditions:
        description: 元数据过滤条件
        items:
          $ref: '#/definitions/request.MetadataFilterItem'
        type: array
      question:
        type: string
      repetition_penalty:
        description: 重复惩罚/频率惩罚
        type: number
      rerank_mod:
        description: rerank_model:重排序模式，weighted_score：权重搜索
        type: string
      rerank_model_id:
        type: string
      retrieve_method:
        description: hybrid_search:混合搜索， semantic_search:向量搜索， full_text_search：文本搜索
        type: string
      return_meta:
        description: 是否返回元数据
        type: boolean
      rewrite_query:
        description: 是否query改写
        type: boolean
      stream:
        type: boolean
      temperature:
        type: number
      term_weight_coefficient:
        description: 关键词系数
        type: number
      threshold:
        description: Score阈值
        type: number
      top_p:
        description: 多样性
        type: number
      topK:
        type: integer
      use_graph:
        description: 是否启动知识图谱查询
        type: boolean
      userId:
        type: string
      weights:
        allOf:
        - $ref: '#/definitions/request.WeightParams'
        description: 权重搜索下的权重配置
    type: object
  request.RagKnowledgeInfo:
    properties:
      kb_id:
        type: string
      kb_name:
        type: string
    type: object
  request.RagQaInfo:
    properties:
      QABase:
        type: string
      QAId:
        type: string
    type: object
  request.RagSearchKnowledgeBaseReq:
    properties:
      auto_citation:
        description: 是否启动知识图谱查询
        type: boolean
      knowledge_base_info:
        additionalProperties:
          items:
            $ref: '#/definitions/request.RagKnowledgeInfo'
          type: array
        type: object
      knowledgeIdList:
        items:
          type: string
        type: array
      metadata_filtering:
        description: 元数据过滤开关
        type: boolean
      metadata_filtering_conditions:
        description: 元数据过滤条件
        items:
          $ref: '#/definitions/request.MetadataFilterItem'
        type: array
      question:
        type: string
      rerank_mod:
        description: rerank_model:重排序模式，weighted_score：权重搜索
        type: string
      rerank_model_id:
        description: rerankId
        type: string
      retrieve_method:
        description: hybrid_search:混合搜索， semantic_search:向量搜索， full_text_search：文本搜索
        type: string
      term_weight_coefficient:
        description: 关键词系数
        type: number
      threshold:
        type: number
      topK:
        type: integer
      use_graph:
        description: 是否启动知识图谱查询
        type: boolean
      userId:
        type: string
      weights:
        allOf:
        - $ref: '#/definitions/request.WeightParams'
        description: 权重搜索下的权重配置
    required:
    - knowledgeIdList
    - question
    - userId
    type: object
  request.RagSearchQABaseReq:
    properties:
      QABaseInfo:
        additionalProperties:
          items:
            $ref: '#/definitions/request.RagQaInfo'
          type: array
        type: object
      knowledgeIdList:
        items:
          type: string
        type: array
      metadataFiltering:
        type: boolean
      metadataFilteringConditions:
        items:
          $ref: '#/definitions/request.QAMetadataFilterItem'
        type: array
      question:
        type: string
      rerankMod:
        type: string
      rerankModelId:
        type: string
      retrieveMethod:
        type: string
      returnMeta:
        type: boolean
      threshold:
        type: number
      topK:
        type: integer
      userId:
        type: string
      weights:
        $ref: '#/definitions/request.WeightParams'
    required:
    - knowledgeIdList
    - userId
    type: object
  request.SearchKnowledgeInfoReq:
    properties:
      categoryName:
        type: string
      orgId:
        type: string
      userId:
        type: string
    required:
    - categoryName
    - userId
    type: object
  request.WeightParams:
    properties:
      text_weight:
        description: 关键字权重
        type: number
      vector_weight:
        description: 语义权重
        type: number
    type: object
  request.WorkflowUploadFileByBase64Req:
    properties:
      file:
        description: base64格式
        type: string
      fileName:
        type: string
    required:
    - file
    - fileName
    type: object
  response.CustomToolActionInfo:
    properties:
      desc:
        type: string
      method:
        type: string
      name:
        type: string
      path:
        type: string
    type: object
  response.CustomToolDetail:
    properties:
      apiAuth:
        allOf:
        - $ref: '#/definitions/util.ApiAuthWebRequest'
        description: apiAuth
      apiList:
        description: action列表
        items:
          $ref: '#/definitions/response.CustomToolActionInfo'
        type: array
      avatar:
        allOf:
        - $ref: '#/definitions/request.Avatar'
        description: 图标
      customToolId:
        description: 自定义工具id
        type: string
      description:
        description: 描述
        type: string
      name:
        description: 名称
        type: string
      privacyPolicy:
        description: 隐私政策
        type: string
      schema:
        description: schema
        type: string
    type: object
  response.ModelInfo:
    properties:
      avatar:
        allOf:
        - $ref: '#/definitions/request.Avatar'
        description: 模型图标路径
      config: {}
      createdAt:
        type: string
      displayName:
        description: 模型显示名称
        type: string
      examples:
        allOf:
        - $ref: '#/definitions/mp.ProviderModelConfig'
        description: 仅用于swagger展示；模型对应供应商中的对应llm、embedding或rerank结构是config实际的参数
      isActive:
        description: '启用状态（true: 启用，false: 禁用）'
        type: boolean
      model:
        description: 模型名称
        type: string
      modelDesc:
        type: string
      modelId:
        type: string
      modelType:
        enum:
        - llm
        - embedding
        - rerank
        type: string
      orgId:
        type: string
      provider:
        description: 模型供应商
        enum:
        - OpenAI-API-compatible
        - YuanJing
        type: string
      publishDate:
        description: 模型发布时间
        type: string
      tags:
        items:
          $ref: '#/definitions/mp_common.Tag'
        type: array
      updatedAt:
        type: string
      userId:
        type: string
    required:
    - model
    - modelType
    - provider
    type: object
  response.Response:
    properties:
      code:
        type: integer
      data: {}
      msg:
        type: string
    type: object
  response.ToolSquareDetail:
    properties:
      actionSum:
        description: action总数
        type: integer
      apiAuth:
        allOf:
        - $ref: '#/definitions/util.ApiAuthWebRequest'
        description: apiAuth
      apiKey:
        description: apiKey
        type: string
      avatar:
        allOf:
        - $ref: '#/definitions/request.Avatar'
        description: 图标
      desc:
        description: 描述
        type: string
      detail:
        description: 详细描述
        type: string
      name:
        description: 名称
        type: string
      needApiKeyInput:
        description: 是否需要apiKey输入
        type: boolean
      schema:
        type: string
      tags:
        description: 标签
        items:
          type: string
        type: array
      toolSquareId:
        description: 广场mcpId(非空表示来源于广场)
        type: string
      tools:
        description: action列表
        items:
          $ref: '#/definitions/protocol.Tool'
        type: array
    type: object
  response.UploadFileByWorkflowResp:
    properties:
      uri:
        type: string
      url:
        type: string
    type: object
  util.ApiAuthWebRequest:
    properties:
      apiKeyHeader:
        description: HTTP头部名称
        type: string
      apiKeyHeaderPrefix:
        description: 鉴权头部前缀
        enum:
        - basic
        - bearer
        - custom
        type: string
      apiKeyQueryParam:
        description: 查询参数名称
        type: string
      apiKeyValue:
        description: apiKey
        type: string
      authType:
        description: 鉴权类型 None 或 请求头 或 查询参数
        enum:
        - none
        - api_key_query
        - api_key_header
        type: string
    required:
    - authType
    type: object
info:
  contact: {}
  title: AI Agent Productivity Platform - Callback
  version: v0.0.1
paths:
  /api/category/info:
    get:
      consumes:
      - application/json
      description: 获取Maas平台知识库信息（模型扩展调用）
      parameters:
      - description: 根据知识库名称请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.SearchKnowledgeInfoReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 获取Maas平台知识库信息（模型扩展调用）
      tags:
      - callback
  /api/deploy/info:
    get:
      consumes:
      - application/json
      description: 获取Maas平台部署信息（模型扩展调用）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 获取Maas平台部署信息（模型扩展调用）
      tags:
      - callback
  /api/doc_status_init:
    get:
      consumes:
      - application/json
      description: 将正在解析的文档设置为解析失败
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 将正在解析的文档设置为解析失败
      tags:
      - callback
  /api/docstatus:
    post:
      consumes:
      - application/json
      description: 更新文档状态（模型扩展调用）
      parameters:
      - description: 更新文档状态请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.CallbackUpdateDocStatusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 更新文档状态（模型扩展调用）
      tags:
      - callback
  /api/knowledge/status:
    post:
      consumes:
      - application/json
      description: 更新知识库状态
      parameters:
      - description: 更新知识库状态请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.CallbackUpdateDocStatusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 更新知识库状态
      tags:
      - callback
  /chatflow/list:
    get:
      consumes:
      - application/json
      description: 根据userId和spaceId获取Chatflow
      parameters:
      - description: 获取工作流参数userId
        in: query
        name: userId
        required: true
        type: string
      - description: 获取工作流参数orgId
        in: query
        name: orgId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 根据userId和spaceId获取Chatflow
      tags:
      - callback
  /file/url/base64:
    post:
      consumes:
      - application/json
      parameters:
      - description: 文件Url转换base64请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.FileUrlConvertBase64Req'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 文件Url转换为base64
      tags:
      - callback
  /model/{modelId}:
    get:
      consumes:
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/response.ModelInfo'
              type: object
      summary: 根据ModelId获取模型
      tags:
      - callback
  /model/{modelId}/asr:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 语音文件
        in: formData
        name: file
        required: true
        type: file
      - description: 请求参数
        in: formData
        name: config
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.AsrResp'
      summary: Model Asr
      tags:
      - callback
  /model/{modelId}/chat/completions:
    post:
      consumes:
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/mp_common.LLMReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.LLMResp'
      summary: Model Chat Completions
      tags:
      - callback
  /model/{modelId}/embeddings:
    post:
      consumes:
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/mp_common.EmbeddingReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.EmbeddingResp'
      summary: Model Embeddings
      tags:
      - callback
  /model/{modelId}/gui:
    post:
      consumes:
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/mp_common.GuiReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.GuiResp'
      summary: Model Gui
      tags:
      - callback
  /model/{modelId}/ocr:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.OcrResp'
      summary: Model Ocr
      tags:
      - callback
  /model/{modelId}/pdf-parser:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      - description: 文件名
        in: formData
        name: file_name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.PdfParserResp'
      summary: Model PdfParser
      tags:
      - callback
  /model/{modelId}/rerank:
    post:
      consumes:
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/mp_common.RerankReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.RerankResp'
      summary: Model Rerank
      tags:
      - callback
  /model/{modelId}/text2image:
    post:
      consumes:
      - multipart/form-data
      - application/json
      parameters:
      - description: 模型ID
        in: path
        name: modelId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/mp_common.Text2ImageReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/mp_common.Text2ImageResp'
      summary: Model Text-to-Image
      tags:
      - callback
  /rag/knowledge/stream/search:
    post:
      consumes:
      - application/json
      description: 知识库流式问答
      parameters:
      - description: 知识库流式问答请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.RagKnowledgeChatReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 知识库流式问答
      tags:
      - callback
  /rag/search-knowledge-base:
    post:
      consumes:
      - application/json
      description: 查询知识库列表（命中测试）
      parameters:
      - description: 查询知识库列表请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.RagSearchKnowledgeBaseReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 查询知识库列表（命中测试）
      tags:
      - callback
  /rag/search-qa-base:
    post:
      consumes:
      - application/json
      description: 查询问答列表（命中测试）
      parameters:
      - description: 查询知识库列表请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.RagSearchQABaseReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 查询问答列表（命中测试）
      tags:
      - callback
  /tool/builtin/asr:
    post:
      consumes:
      - application/json
      parameters:
      - description: 语音文件 base64
        in: formData
        name: file
        required: true
        type: file
      - description: 请求参数
        in: formData
        name: config
        required: true
        type: string
      - description: api token
        in: formData
        name: apiKey
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: string
              type: object
      summary: 语音文件（base64格式）转文本内置工具服务
      tags:
      - callback
  /workflow/list:
    get:
      consumes:
      - application/json
      description: 根据userId和spaceId获取Workflow
      parameters:
      - description: 获取工作流参数userId
        in: query
        name: userId
        required: true
        type: string
      - description: 获取工作流参数orgId
        in: query
        name: orgId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      summary: 根据userId和spaceId获取Workflow
      tags:
      - callback
  /workflow/tool/custom:
    get:
      consumes:
      - application/json
      description: 获取自定义工具详情
      parameters:
      - description: customToolId
        in: query
        name: customToolId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/response.CustomToolDetail'
              type: object
      summary: 获取自定义工具详情
      tags:
      - callback
  /workflow/tool/square:
    get:
      consumes:
      - application/json
      description: 获取内置工具详情
      parameters:
      - description: toolSquareId
        in: query
        name: toolSquareId
        required: true
        type: string
      - description: 用户ID
        in: query
        name: userID
        required: true
        type: string
      - description: 组织ID
        in: query
        name: orgID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/response.ToolSquareDetail'
              type: object
      summary: 获取内置工具详情
      tags:
      - callback
  /workflow/upload/file:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      - description: 文件名
        in: formData
        name: fileName
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/response.UploadFileByWorkflowResp'
              type: object
      summary: 通过二进制上传文件
      tags:
      - callback
  /workflow/upload/file/base64:
    post:
      consumes:
      - application/json
      parameters:
      - description: 通过base64格式上传文件参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/request.WorkflowUploadFileByBase64Req'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/response.UploadFileByWorkflowResp'
              type: object
      summary: 通过base64上传文件
      tags:
      - callback
swagger: "2.0"
